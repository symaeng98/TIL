# HTTP

HTTP는 어플리케이션 계층에서 웹 서비스 통신에 사용됨

## HTTP/1.0

- 한 연결 당 하나의 요청 처리
- 요청마다 3 way handshake 해줘야돼서 RTT 증가
    - RTT(Round Trip Time): 패킷이 목적지에 도달하고 나서 다시 출발지로 돌아오기까지 걸리는 시간 (패킷 왕복 시간)

### RTT 증가를 해결하기 위한 방법

- 이미지 스플리팅
    - 많은 이미지를 합쳐서 하나의 이미지로 만들어서 다운받는 형식
- 코드 압축
    - 개행, 빈칸 없애서 압축
- Base64 인코딩
    - 이미지 파일을 64진법으로 이루어진 ****문자열로 인코딩하는 방법
    - 크기가 좀 더 커지는 단점이 있음

## HTTP/1.1

- 매번 TCP 연결하는 것 대신, **keep-alive** 옵션을 사용하여 여러 개의 파일 송수신
    - 참고로 HTTP/1.0에도 keep-alive는 있었음

### HOL Blocking (Head Of Line Blocking)

- 큐에서 첫 번째 패킷에 의해 뒤의 패킷들이 지연되는 현상

### 무거운 헤더 구조

- 헤더에 쿠키 등 많은 메타데이터들이 있고, 압축이 되지 않아서 무거웠음

## HTTP/2

- HTTP/1.x 보다 지연 시간 줄이고 응답 시간 더 빠름
- 멀티플렉싱, 헤더 압축, 서버 푸시, 요청의 **우선순위 처리 지원**

### 멀티플렉싱

- 여러 개의 스트림을 사용하여 송수신
- 특정 스트림의 패킷이 손실되어도 나머지 스트림에는 영향을 끼치지 않음
- HOL Blocking 해결 가능

### 헤더 압축

- 허프만 코딩 압축 알고리즘 사용
    - 문자열을 문자 단위로 쪼개 빈도수를 세서 빈도가 높으면 적은 비트 수를 사용하고 낮으면 많이 사용해서 비트 양을 줄임

### 서버 푸시

- 클라이언트가 요청하지 않아도 서버가 리소스를 푸시할 수 있음
    - ex) html을 읽으면서 그 안에 있는 css와 js까지 푸시
    - 기존에는 파일마다 매번 요청 해야됐음

## HTTPS

- 애플리케이션 계층과 전송 계층 사이에 신뢰 계층인 SSL/TLS 계층을 넣은 신뢰할 수 있는 HTTP 요청
    - 통신 암호화

### SSL/TLS

- SSL이 TLS로 명칭이 바뀌었는데, 일반적으로 SSL/TLS로 부름
- 중간에서 정보를 가로채는 **인터셉트를 방지**할 수 있음
- 보안 세션을 기반으로 데이터 암호화
    - 핸드셰이크로 보안 세션 생성

## HTTP/3

- TCP가 아니라 QUIC 계층 위에서 돌아감
- UDP 기반
- 멀티플렉싱

### 초기 연결 설정 시 지연 시간 감소

- TCP를 사용하지 않아서 3 way handshake 필요 없음
- 전송 패킷이 손실되었다면, 수신 측에서 에러 검출하고 수정하는 방식